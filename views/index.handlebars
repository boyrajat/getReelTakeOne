<!-- ==============================================
		HEADER
=============================================== -->

<header class="header">
  	<div class="row" id="header_text-box">
  		<div class="col-3">
			<img id="logo" src="assets/images/logo2.png">
		  </div>

		  
  		<div class="col-3" id="add-movie">
			<form action='/year' method=GET>
			{{!-- <input name="hidden"> --}}
		<button id="sortYear-button"><img id="add-movie-image" src="assets/images/addBtn.jpg">Sort By Year</button>
			</form>
		</div>


  		<div class="col-3" id="add-movie">
			<form action='/rating' method=GET>
			{{!-- <input name="hidden" type="text" class="form-control" id="add-movie-input" placeholder="Movie name"> --}}
		<button id="sortRating-button"><img id="add-movie-image" src="assets/images/addBtn.jpg">Sort by IMDB rating</button>
			</form>
		</div>


  		
		  

  		<div class="col-3" id="add-movie">
			<form action='/api/new/movie' method=POST>
			<input name="name" type="text" class="form-control" id="add-movie-input" placeholder="Movie name">
		<button id="add-movie-button"><img id="add-movie-image" src="assets/images/addBtn.jpg"></button>
			</form>
		</div>
	</div>
</header>
<main >
<!-- ==============================================
		MOVIES WATCHLIST
=============================================== -->

<div class="row" id="movies-container">
	<!--movie box -->
	
	{{#each movies}}
		{{#unless this.watched}}
	
		<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="movie-box">
        	<div class="box gallery">
				<div class="card">
    				<img class="img-responsive" id="new-movies" src={{this.movie_poster}}>
    				<a onClick="modalDisplay({{@index}})" href="#" class="overlay link" id="trigger-modal{{@index}}"></a>
						<div class="info">
      		        		<div class="foot">
								<p class="movie-title">{{this.movie_name}}</p>
								<i class="line"></i>
								<p class="runtime">{{this.movie_time}}</p>
							</div>
     		    		</div>
     	    	</div>
        	</div>
		</div>

	<div id="myModal{{@index}}" class="modal">

  		<!-- Modal content -->
  		<div class="modal-content">
   
    		<div class="row" id="modal-body">
      			<div class="col-5" id="search-movie">
					<img id="selected-movie-poster" src={{this.movie_poster}}>
				</div>
				<div class="col-7">
					<div class="row"></div>
					<span id='closeit{{@index}}' class="close">&times;</span>
					<div class="container" id="modal-movie-info-box">
						<h2 class="movie-title" id="modal-movie-title">{{this.movie_name}}</h2>
						<div class="row">
							<div class="col-2" id="year"><h5>{{this.movie_year}}</h5></div>
							<div class="col-2" id="runtime"><h5>{{this.movie_time}}</h5></div>
							<div class="col-6" id="genre"><h5>{{this.movie_genre}}</h5></div>
						</div>
						<div class="row">
							<div class="col-3" id="raiting-imdb"><img id="imdb-logo" src="assets/images/imdbLogo.png"><h6>{{this.movie_ratingImdb}}</h6></div>
                        	<div class="col-3" id="raiting-roten"><img id="roten-logo" src="assets/images/rotenLogo.png"><h6>{{this.movie_ratingRotten}}</h6></div>
						</div>

						<div class="row">
							<div class="col-8" id="director">	
								<p><strong>Directed by: </strong></p><p>{{this.movie_director}}</p>
							</div>
					
						</div>
						
						<div class="row">
							<div class="col-8" id="cast">
								<p><strong>Starring: </strong></p>	<p>{{this.movie_actors}}</p>
							</div>
					
						</div>

						
						<div class="row">
							<div class="col-8" id="plot">	
								<p><strong>Plot: </strong></p><p>{{this.movie_plot}}</p>
							</div>
					
						</div>
						
						<div>
							<form action="/api/new/watched/{{this.id}}?_method=PUT" method="POST">
                       
                        		<input type="hidden" name="watched" value="true">
                       			<button type="submit"><img id="watched-movie-button" src="assets/images/watchedBtn.jpg"></button>
                    		</form>
						
						</div>
						<!-- trailer -->
						
							<iframe width="854" height="480" src="https://www.youtube.com/embed/{{this.movie_trailer}}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
						

					</div>
				
				</div>
			
    		</div>
  		</div>

	</div>

		{{/unless}}
	{{/each}}
		
		 <!--end of movie box -->
	

</div>

<hr>
<!-- ==============================================
		WATCHED MOVIES
=============================================== -->
<div class='row' id='watched-container'>
	{{#each movies}}
		{{#if this.watched}}
			<div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="movie-box">
       			<div class="box gallery">
					<div class="card">
						<form action="/{{this.id}}?_method=PUT" method="POST">
                        	<input type="hidden" name="watched" value="false">
							<img class="img-responsive" id="new-movies" src={{this.movie_poster}}>
                        	<a href="/" class="overlay link" id="markUnWatched"><button type="submit" class="btn btn-danger btn-sm">Mark not Watched</button></a>

                    	</form>
    					<img class="img-responsive" id="new-movies" src={{this.movie_poster}}>
					</div>
				</div>
			</div>
		{{/if}}
	{{/each}}

</div>
	
	
</main>

<!-- ==============================================
		FOOTER
=============================================== -->
<footer class="footer">
	<div class="footer_text-box"> 
		<p id="footer_text">Â© Asley Calixte, Raj Narula, Mariela Pascual   2018</p>
	</div>

</footer>


<script>

function modalDisplay(num) {
		console.log(num);
// Get the modal
var modal = document.getElementById('myModal'+num);
//console.log(modal);
// Get the button that opens the modal
var btn = document.getElementById("trigger-modal"+num);
 modal.style.display = "block";
 //embedUt(num);
// Get the <span> element that closes the modal
var span = document.getElementById('closeit'+num);
// When the user clicks the button, open the modal 
//btn.onclick = function() {
   
//}
// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    	}
	}
}

</script>